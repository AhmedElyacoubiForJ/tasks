<head th:fragment="head" xmlns:th="http://www.thymeleaf.org">
    <meta charset="UTF-8">
    <title>Kundenübersicht</title>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <link href="https://cdn.simplecss.org/simple.min.css" rel="stylesheet">
        <script>
            function sync(el) {
              const form = el.closest('tr').querySelector('form');
              const hidden = form.querySelector(`input[name="${el.name}"]`);
              if (hidden) hidden.value = el.value;
            }
            function highlightChange(el) {
                const original = el.getAttribute('data-original');
                const current = el.value;

                console.log("Original:", original);
                console.log("Current:", current);

                if (current !== original) {
                  el.classList.add('field-edited');
                } else {
                  el.classList.remove('field-edited');
                }
            }

            document.addEventListener('DOMContentLoaded', function () {
          document.body.addEventListener('htmx:afterRequest', function (evt) {
            const target = evt.detail.target;
            const rowId = target.getAttribute('data-row-id');

            console.log("data-row-id:", rowId);
            console.log("htmx:afterRequest", evt.detail.xhr.status);

            if (evt.detail.xhr.status === 204 && rowId) {
              const row = document.getElementById(rowId);
              if (row) row.remove();
            }
          });
        });


<!--            document.body.addEventListener('htmx:responseError', function (evt) {-->
<!--                    alert('Löschen fehlgeschlagen: ' + evt.detail.xhr.statusText);-->
<!--            });-->


        </script>
    <link rel="stylesheet" href="/css/inlineBearbeitung.css"/>
</head>