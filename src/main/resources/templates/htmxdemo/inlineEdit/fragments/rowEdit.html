<!--
    Fragment zur Inline-Bearbeitung eines Kunden
    - vollständiges <form> mit allen Feldern innerhalb einer einzigen <td>
    - erlaubt valide HTML und sendet korrekte Werte
-->
<th:block th:fragment="rowEdit(kunde)" xmlns:th="http://www.thymeleaf.org">
    <tr th:id="'kunde-' + ${kunde.id}">
        <td>
            <input name="id" readonly th:value="${kunde.id}" type="text"
                   oninput="sync(this)" />
        </td>
        <td>
            <input name="name" th:value="${kunde.name}" type="text"
                   oninput="sync(this)" />
        </td>
        <td>
            <input name="email" th:value="${kunde.email}" type="email"
                   oninput="sync(this)" />
        </td>
        <td>
            <form th:hx-post="@{'/inlineEdit/update/' + ${kunde.id}}"
                  th:hx-target="'#kunde-' + ${kunde.id}"
                  hx-swap="outerHTML">

                <!-- versteckte Brückenfelder -->
                <input type="hidden" name="id" th:value="${kunde.id}" />
                <input type="hidden" name="name" th:value="${kunde.name}"/>
                <input type="hidden" name="email" th:value="${kunde.email}"/>

                <button type="submit">✅ Speichern</button>
            </form>

            <!-- ❌ Abbrechen-Button (separat im selben <td>) -->
            <button type="button"
                    th:hx-get="@{'/inlineEdit/view/' + ${kunde.id}}"
                    th:hx-target="'#kunde-' + ${kunde.id}"
                    hx-swap="outerHTML">
                ❌ Abbrechen
            </button>
        </td>
    </tr>
</th:block>