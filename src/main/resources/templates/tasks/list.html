<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ðŸ“‚ Aufgaben</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="container">
<h1>ðŸ“‚ Aufgaben fÃ¼r TaskList</h1>

<!-- ðŸ§© Tabs fÃ¼r Status-Filter -->
<!--<ul class="nav nav-tabs mb-3">
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == null} ? 'active'"
           th:href="@{/tasklists/{id}/tasks(id=${taskListId})}">
            Alle
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == 'OPEN'} ? 'active'"
           th:href="@{/tasklists/{id}/tasks/status(id=${taskListId}, status='OPEN')}">
            Offen
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == 'CLOSED'} ? 'active'"
           th:href="@{/tasklists/{id}/tasks/status(id=${taskListId}, status='CLOSED')}">
            Erledigt
        </a>
    </li>
</ul>-->
<ul class="nav nav-tabs mb-3">
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == null} ? 'active text-primary'"
           th:href="@{/tasklists/{id}/tasks(id=${taskListId})}">
            ðŸ“‹ Alle
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == 'OPEN'} ? 'active text-success'"
           th:href="@{/tasklists/{id}/tasks/status(id=${taskListId}, status='OPEN')}">
            ðŸŸ¢ Offen
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" th:classappend="${selectedStatus == 'CLOSED'} ? 'active text-secondary'"
           th:href="@{/tasklists/{id}/tasks/status(id=${taskListId}, status='CLOSED')}">
            ðŸ”µ Erledigt
        </a>
    </li>
</ul>

<!-- ðŸ“‹ Tabelle mit Tasks -->
<table class="table table-striped table-hover table-sm">
    <thead>
    <tr>
        <th>Titel</th>
        <th>Beschreibung</th>
        <th>FÃ¤llig</th>
        <th>PrioritÃ¤t</th>
        <th>Status</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="task : ${tasks}">
        <td th:text="${task.title}"></td>
        <td th:text="${task.description}"></td>
        <!-- ðŸ”´ ÃœberfÃ¤llig -->
        <td class="text-danger"
            th:if="${task.status.name() != 'CLOSED' and task.dueDate != null and task.dueDate.toLocalDate().isBefore(T(java.time.LocalDate).now())}">
            <span th:text="${#temporals.format(task.dueDate, 'dd.MM.yyyy')}"></span>
        </td>

        <!-- ðŸŸ¡ Heute -->
        <td class="text-warning"
            th:if="${task.status.name() != 'CLOSED' and task.dueDate != null and task.dueDate.toLocalDate().isEqual(T(java.time.LocalDate).now())}">
            <span th:text="${#temporals.format(task.dueDate, 'dd.MM.yyyy')}"></span>
        </td>

        <!-- ðŸŸ¡ Morgen -->
        <td class="text-warning"
            th:if="${task.status.name() != 'CLOSED' and task.dueDate != null and task.dueDate.toLocalDate().isEqual(T(java.time.LocalDate).now().plusDays(1))}">
            <span th:text="${#temporals.format(task.dueDate, 'dd.MM.yyyy')}"></span>
        </td>

        <!-- âšª Neutral -->
        <td th:if="${task.dueDate == null or task.status.name() == 'CLOSED'}">
            <span th:text="${#temporals.format(task.dueDate, 'dd.MM.yyyy')}"></span>
        </td>

        <span th:switch="${task.priority.name()}">
            <span th:case="'LOW'">ðŸ§Š Niedrig</span>
            <span th:case="'MEDIUM'">ðŸ”¥ Mittel</span>
            <span th:case="'HIGH'">ðŸš¨ Hoch</span>
            <span th:case="*">âšª Unbekannt</span>
        </span>
        </td>

        <td>
        <span th:switch="${task.status.name()}">
            <span th:case="'OPEN'">ðŸŸ¢ Offen</span>
            <span th:case="'IN_PROGRESS'">ðŸŸ¡ In Bearbeitung</span>
            <span th:case="'CLOSED'">ðŸ”µ Erledigt</span>
            <span th:case="*">âšª Unbekannt</span>
        </span>
        </td>

    </tr>
    </tbody>
</table>
</body>
</html>
