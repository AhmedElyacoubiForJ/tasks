<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ðŸ“‚ Aufgaben</title>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="container">
<h1>ðŸ“‚ Aufgaben fÃ¼r TaskList</h1>

<!-- ðŸ§© Tabs fÃ¼r Status-Filter -->
<ul class="nav nav-tabs mb-3">
    <li class="nav-item">
        <a class="nav-link"
           th:attr="hx-get=@{/tasklists/{id}/tasks(id=${taskListId})}, hx-target='#taskTable', hx-swap='outerHTML'"
           th:classappend="${selectedStatus == null} ? 'active text-primary'">
            ðŸ“‹ Alle
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link"
           th:attr="hx-get=@{/tasklists/{id}/tasks/status(id=${taskListId}, status='OPEN')}, hx-target='#taskTable', hx-swap='outerHTML'"
           th:classappend="${selectedStatus == 'OPEN'} ? 'active text-success'">
            ðŸŸ¢ Offen
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link"
           th:attr="hx-get=@{/tasklists/{id}/tasks/status(id=${taskListId}, status='CLOSED')}, hx-target='#taskTable', hx-swap='outerHTML'"
           th:classappend="${selectedStatus == 'CLOSED'} ? 'active text-secondary'">
            ðŸ”µ Erledigt
        </a>
    </li>
</ul>


<!-- ðŸ“‹ Tabelle mit Tasks -->
<!-- ðŸ“¦ Fragment fÃ¼r Tabelle -->
<div id="taskTable" th:fragment="table">
    <table class="table table-striped table-hover table-sm">
        <thead>
        <tr>
            <th>Titel</th>
            <th>Beschreibung</th>
            <th>FÃ¤llig</th>
            <th>PrioritÃ¤t</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody hx-swap="outerHTML swap:1s" hx-target="closest tr">
            <th:block th:each="task : ${tasks}">
                <tr th:replace="~{tasks/fragments/task-row :: row(${task})}"></tr>
            </th:block>
        </tbody>
    </table>
</div>
</body>
</html>

